<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fjyt.asset.management.mapper.WarehouseMapper">

    <select id="warehouseList" parameterType="WarehouseQueryDTO" resultType="WarehouseVO">
        select
        w.id,w.warehouse_code,w.warehouse_name,w.province_id,w.city_id,w.county_id,
        w.specific_position,w.address,w.remark,w.create_user,w.create_time,w.update_user,
        w.update_time,w.status,w.warehouse_del
        from warehouse w
        <where>
            w.warehouse_del = '0'
            <if test="warehouseName != null and warehouseName != ''">
                and w.warehouse_name like concat('%',#{warehouseName},'%')
            </if>
        </where>
    </select>

    <select id="warehouseInfo" parameterType="Long" resultType="WarehouseDetailVO">
        select
        w.id,w.warehouse_code,w.warehouse_name,w.province_id,w.city_id,w.county_id,
        w.specific_position,w.address,w.remark,w.status
        from warehouse w
        where w.id = #{id}
    </select>

    <select id="checkByWarehouseName" parameterType="String" resultType="Warehouse">
        select
        w.id,w.warehouse_code,w.warehouse_name,w.province_id,w.city_id,w.county_id,
        w.specific_position,w.address,w.remark,w.create_user,w.create_time,w.update_user,
        w.update_time,w.status,w.warehouse_del
        from warehouse w
        where
            w.warehouse_del = '0'
            and w.warehouse_name = #{warehouseName}
    </select>

    <select id="assetAndWarehouseByWareCode" parameterType="Long" resultType="AssetWarehouse">
        select * from asset_warehouse where warehouse_id = #{warehouseId}
    </select>

    <insert id="addWarehouse" parameterType="Warehouse">
        insert into warehouse
        (
         <if test="warehouseCode != null and warehouseCode != ''">warehouse_code,</if>
         <if test="warehouseName != null and warehouseName != ''">warehouse_name,</if>
         <if test="provinceId != null and provinceId != ''">province_id,</if>
         <if test="cityId != null and cityId != ''">city_id,</if>
         <if test="countyId != null and countyId != ''">county_id,</if>
         <if test="specificPosition != null and specificPosition != ''">specific_position,</if>
         <if test="address != null and address != ''">address,</if>
         <if test="remark != null and remark != ''">remark,</if>
         <if test="createUser != null and createUser != ''">create_user,</if>
         <if test="createTime != null">create_time,</if>
         <if test="updateUser != null and updateUser != ''">update_user,</if>
         <if test="status != null and status != ''">status,</if>
         update_time
        )
        values
        (
        <if test="warehouseCode != null and warehouseCode != ''">#{warehouseCode},</if>
        <if test="warehouseName != null and warehouseName != ''">#{warehouseName},</if>
        <if test="provinceId != null and provinceId != ''">#{provinceId},</if>
        <if test="cityId != null and cityId !=''">#{cityId},</if>
        <if test="countyId != null and countyId !=''">#{countyId},</if>
        <if test="specificPosition != null">#{specificPosition},</if>
        <if test="address != null">#{address},</if>
        <if test="remark != null">#{remark},</if>
        <if test="createUser != null and createUser != ''">#{createUser},</if>
        <if test="createTime != null">#{createTime},</if>
        <if test="updateUser != null and updateUser != ''">#{updateUser},</if>
        <if test="status != null and status != ''">#{status},</if>
         #{updateTime}
        )
    </insert>

    <update id="updateWarehouse" parameterType="Warehouse">
        update warehouse
        <set>
            <if test="warehouseName != null and warehouseName != ''">warehouse_name = #{warehouseName},</if>
            <if test="provinceId != null and provinceId != ''">province_id = #{provinceId},</if>
            <if test="cityId != null and cityId != ''">city_id = #{cityId},</if>
            <if test="countyId != null and countyId != ''">county_id = #{countyId},</if>
            <if test="specificPosition != null and specificPosition != ''">specific_position = #{specificPosition},</if>
            <if test="address != null and address != ''">address = #{address},</if>
            <if test="remark != null and remark != ''">remark = #{remark},</if>
            <if test="updateUser != null and updateUser != ''">update_user = #{updateUser},</if>
            <if test="status != null and status != ''">status = #{status},</if>
            update_time = #{updateTime}
        </set>
        where id = #{id}
    </update>

    <update id="updateStatus" parameterType="Warehouse">
        update warehouse set status = #{status} where id = #{id}
    </update>

    <update id="deleteWarehouse" parameterType="Long">
        update warehouse set warehouse_del = '1' where id = #{id}
    </update>

</mapper>